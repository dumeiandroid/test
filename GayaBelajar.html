<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tes Gaya Belajar VAK</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --bg: #f8fafc;
            --grad-blue: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            margin: 0; padding: 10px; background: var(--bg);
            display: flex; flex-direction: column; align-items: center; min-height: 100vh;
        }

        /* --- HALAMAN PEMBUKA --- */
        #welcome-screen {
            max-width: 650px; width: 100%; background: white;
            border-radius: 20px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: block;
        }
        .hero-banner { background: var(--grad-blue); color: white; padding: 40px 25px; text-align: center; }
        .info-content { padding: 30px; color: #444; line-height: 1.7; }
        
        .vak-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 20px 0; }
        .vak-item { background: #f1f5f9; padding: 15px; border-radius: 12px; text-align: center; border: 1px solid #e2e8f0; }
        .vak-item i { display: block; font-size: 1.5rem; margin-bottom: 5px; }

        .token-box { background: #f8fafc; padding: 25px; border-top: 1px solid #edf2f7; text-align: center; }
        .token-input { 
            width: 100%; max-width: 300px; padding: 12px; border: 2px solid #cbd5e0; border-radius: 8px; 
            text-align: center; font-size: 1.1rem; font-weight: bold; margin-bottom: 15px; outline: none;
        }

        /* Teks Link WhatsApp Merah */
        .wa-link {
            display: block;
            margin-top: 15px;
            color: #e74c3c;
            font-size: 0.85rem;
            text-decoration: none;
            font-weight: bold;
            line-height: 1.4;
        }
        .wa-link:hover { text-decoration: underline; }

        /* --- BUTTONS --- */
        .btn-action { 
            width: 100%; max-width: 300px; padding: 15px; border: none; border-radius: 8px; 
            background: var(--accent); color: white; font-weight: bold; cursor: pointer; font-size: 1rem;
            transition: 0.3s;
        }
        .btn-action:hover { background: #2980b9; transform: translateY(-2px); }

        /* --- QUIZ SECTION --- */
        #quiz-container, #result-container { display: none; width: 100%; max-width: 700px; }
        .video-wrapper { position: relative; width: 100%; padding-bottom: 56.25%; background: #000; border-radius: 15px; overflow: hidden; margin-bottom: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); }
        .video-wrapper iframe { position: absolute; top:0; left:0; width:100%; height:100%; border:none; }
        
        .quiz-card { background: white; padding: 30px; border-radius: 15px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .options-group { display: flex; gap: 15px; margin-top: 25px; justify-content: center; }
        .btn-opt { width: 70px; height: 70px; border: 3px solid var(--accent); border-radius: 15px; background: white; color: var(--accent); font-weight: bold; cursor: pointer; font-size: 1.4rem; transition: 0.2s; }
        .btn-opt:hover { background: var(--accent); color: white; }

        /* --- RESULT VIEW --- */
        .result-paper { background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 15px 40px rgba(0,0,0,0.15); }
        .result-header { background: var(--grad-blue); color: white; padding: 30px; text-align: center; }
        .result-body { padding: 30px; }
        .progress-bar-bg { background: #eee; height: 20px; border-radius: 10px; overflow: hidden; margin-top: 5px; }
        .progress-bar-fill { height: 100%; transition: width 1s ease-in-out; }

        /* --- MODAL --- */
        .overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:none; justify-content:center; align-items:center; z-index:1000; }
        .modal { background:white; padding:30px; border-radius:15px; width:90%; max-width:400px; }
        .hidden { display: none; }
        input[type="text"], input[type="number"] { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
    </style>
</head>
<body>

<div id="welcome-screen">
    <div class="hero-banner">
        <h1>Tes Gaya Belajar</h1>
        <p>Temukan Cara Belajar Terbaikmu</p>
    </div>
    
    <div class="info-content">
        <p>Selamat datang di tes gaya belajar. Halo semuanya. Pernahkah kamu merasa sudah belajar keras tapi materinya kayak enggak nyangkut di kepala?</p>
        
        <p>Atau ada teman yang belajarnya santai tapi nilainya malah lebih bagus? Jangan khawatir, kamu enggak sendirian. Ternyata setiap orang punya cara belajar yang berbeda-beda.</p>
        
        <div class="vak-grid">
            <div class="vak-item"><i>üëÅÔ∏è</i><b>Visual</b>Lihat Gambar</div>
            <div class="vak-item"><i>üëÇ</i><b>Auditori</b>Dengar Penjelasan</div>
            <div class="vak-item"><i>ü§∏</i><b>Kinestetik</b>Langsung Praktik</div>
        </div>
        
        <p>Apakah kamu tipe visual, auditori, atau kinestetik? Dengan mengetahui gaya belajarmu, proses belajar akan jadi lebih mudah, menyenangkan, dan tentunya lebih efektif.</p>
        
        <p style="font-weight: bold; text-align: center; color: var(--accent); border: 2px dashed var(--accent); padding: 10px; border-radius: 10px;">
            Siapkan kertas dan pulpen untuk mencatat jawaban kamu, ya. Yuk, kita mulai tesnya sekarang!
        </p>
    </div>

    <div class="token-box">
        <input type="text" id="token-input" class="token-input" placeholder="Masukkan Kode Token...">
        <br>
        <button class="btn-action" onclick="validateToken()">MULAI SEKARANG</button>
        
        <a href="https://wa.me/6285159601400?text=sy%20ingin%20mendapatkan%20token%20tes%20gaya%20belajar%2C%20berapakah%20biayanya%3F" 
           target="_blank" class="wa-link">
            Apabila kamu belum memiliki token,<br>silahkan hubungi Lidan Psikologi (Klik Di Sini)
        </a>
    </div>
</div>

<div id="quiz-container">
    <div class="video-wrapper">
        <iframe src="https://www.youtube.com/embed/hqzBQ-QlzIg?si=zmh6lZjrV0hdU5jY" allowfullscreen></iframe>
    </div>
    
    <div class="quiz-card">
        <h2 id="question-label" style="margin:0; color:var(--primary);">Soal Nomor 1</h2>
        <div class="options-group">
            <button class="btn-opt" onclick="submitAnswer('A')">A</button>
            <button class="btn-opt" onclick="submitAnswer('B')">B</button>
            <button class="btn-opt" onclick="submitAnswer('C')">C</button>
        </div>
    </div>
</div>

<div id="data-overlay" class="overlay">
    <div class="modal">
        <h3 style="margin-top:0; text-align:center;">Tes Selesai!</h3>
        <p style="font-size:0.9rem; color:#666;">Isi data diri untuk melihat hasil analisis gaya belajar Anda.</p>
        <div style="margin-bottom:12px">
            <label style="font-size:0.8rem; font-weight:bold;">Nama Lengkap</label>
            <input type="text" id="user-name">
        </div>
        <div style="margin-bottom:12px">
            <label style="font-size:0.8rem; font-weight:bold;">Usia</label>
            <input type="number" id="user-age">
        </div>
        <button class="btn-action" style="max-width:none; width:100%; margin-top:10px;" onclick="calculateAndShow()">LIHAT HASIL</button>
    </div>
</div>

<div id="result-container">
    <div class="result-paper" id="capture-zone">
        <div class="result-header">
            <h2 style="margin:0;">Laporan Gaya Belajar</h2>
            <p id="display-name" style="margin-top:5px; opacity:0.9;"></p>
        </div>
        <div class="result-body">
            <div id="result-summary"></div>
            <div style="height:250px; margin:20px 0;">
                <canvas id="chartVAK"></canvas>
            </div>
            <div id="result-tips" style="font-size:0.9rem; color:#444; border-top:1px solid #eee; padding-top:15px;"></div>
        </div>
    </div>
    
    <div style="margin-top:20px; display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
        <button class="btn-action" style="max-width:none; background:#27ae60" onclick="saveAsImage()">üì• Download JPG</button>
        <button class="btn-action" style="max-width:none; background:#2c3e50" onclick="window.print()">üñ®Ô∏è Cetak PDF</button>
    </div>
    <button class="btn-action" style="max-width:none; width:100%; background:#bdc3c7; margin-top:10px;" onclick="location.reload()">üîÑ Ulangi Tes</button>
</div>

<script>
    const SECRET_TOKEN = "123abc";
    let qCount = 1;
    let userAnswers = {};
    
    const VAK_DATA = {
        A: { name: 'VISUAL', color: '#3498db', icon: 'üëÅÔ∏è', desc: 'Kamu lebih mudah belajar dengan melihat sesuatu (gambar, diagram, video).', tips: 'Gunakan peta konsep (mind mapping), beri warna pada catatan, dan tonton video penjelasan.' },
        B: { name: 'AUDITORI', color: '#f1c40f', icon: 'üëÇ', desc: 'Kamu lebih mudah belajar dengan mendengarkan suara atau penjelasan.', tips: 'Rekam penjelasan guru, baca materi dengan suara keras, atau diskusikan materi dengan teman.' },
        C: { name: 'KINESTETIK', color: '#2ecc71', icon: 'ü§∏', desc: 'Kamu lebih mudah belajar dengan mempraktikkan langsung atau bergerak.', tips: 'Gunakan alat peraga, lakukan simulasi, atau belajar sambil melakukan aktivitas fisik ringan.' }
    };

    function validateToken() {
        if (document.getElementById('token-input').value === SECRET_TOKEN) {
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
        } else {
            alert("Token tidak valid! Silakan hubungi Lidan Psikologi untuk mendapatkan token.");
        }
    }

    function submitAnswer(val) {
        userAnswers[`q${qCount}`] = val;
        if (qCount < 15) {
            qCount++;
            document.getElementById('question-label').innerText = "Soal Nomor " + qCount;
        } else {
            document.getElementById('data-overlay').style.display = 'flex';
        }
    }

    function calculateAndShow() {
        const nama = document.getElementById('user-name').value;
        if(!nama) return alert("Mohon isi nama Anda");

        let scores = { A: 0, B: 0, C: 0 };
        Object.values(userAnswers).forEach(ans => scores[ans]++);
        
        const winner = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
        const style = VAK_DATA[winner];

        document.getElementById('data-overlay').style.display = 'none';
        document.getElementById('quiz-container').style.display = 'none';
        document.getElementById('result-container').style.display = 'block';

        document.getElementById('display-name').innerText = "Nama: " + nama;
        document.getElementById('result-summary').innerHTML = `
            <div style="text-align:center; padding:15px; background:#f0f7ff; border-radius:12px; margin-bottom:20px;">
                <h1 style="color:${style.color}; margin:0;">${style.icon} ${style.name}</h1>
                <p style="margin:5px 0;">${style.desc}</p>
            </div>
            ${['A','B','C'].map(k => {
                let p = Math.round((scores[k]/15)*100);
                return `
                    <div style="margin-bottom:10px;">
                        <div style="display:flex; justify-content:space-between; font-size:0.8rem;"><b>${VAK_DATA[k].name}</b> <span>${p}%</span></div>
                        <div class="progress-bar-bg"><div class="progress-bar-fill" style="width:${p}%; background:${VAK_DATA[k].color}"></div></div>
                    </div>
                `;
            }).join('')}
        `;

        document.getElementById('result-tips').innerHTML = `<b>üí° Tips Belajar Untukmu:</b><br>${style.tips}`;

        new Chart(document.getElementById('chartVAK'), {
            type: 'doughnut',
            data: {
                labels: ['Visual', 'Auditori', 'Kinestetik'],
                datasets: [{ data: [scores.A, scores.B, scores.C], backgroundColor: ['#3498db', '#f1c40f', '#2ecc71'] }]
            },
            options: { responsive: true, maintainAspectRatio: false }
        });
    }

    async function saveAsImage() {
        const zone = document.getElementById('capture-zone');
        const canvas = await html2canvas(zone, { scale: 2 });
        const link = document.createElement('a');
        link.download = 'Hasil-Gaya-Belajar.jpg';
        link.href = canvas.toDataURL('image/jpeg');
        link.click();
    }
</script>
</body>
</html>