<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tes Ekstrovert vs Introvert - Lidan Psikologi</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
        :root { 
            --primary: #2c3e50; 
            --accent: #e74c3c; 
            --bg: #f0f2f5; 
            --ext-color: #e74c3c;
            --int-color: #34495e;
            --amb-color: #9b59b6;
        }
        
        body { font-family: 'Segoe UI', sans-serif; margin: 0; padding: 15px; background: var(--bg); display: flex; flex-direction: column; align-items: center; }
        
        /* --- WELCOME SCREEN --- */
        #welcome-screen { max-width: 650px; width: 100%; background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .hero-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px 25px; text-align: center; }
        .info-text { padding: 30px; color: #444; line-height: 1.7; }
        .token-box { background: #f8fafc; padding: 25px; border-top: 1px solid #edf2f7; text-align: center; }
        .token-input { width: 100%; max-width: 300px; padding: 12px; border: 2px solid #cbd5e0; border-radius: 8px; text-align: center; font-size: 1.1rem; margin-bottom: 15px; outline: none; }
        .wa-link { display: block; margin-top: 15px; color: #e74c3c; font-size: 0.85rem; text-decoration: none; font-weight: bold; line-height: 1.4; }

        /* --- QUIZ SECTION --- */
        #quiz-container { display: none; width: 100%; max-width: 700px; flex-direction: column; gap: 15px; }
        .video-box { position: relative; width: 100%; padding-bottom: 56.25%; background: #000; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .video-box iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
        .quiz-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center; }
        .option-btn { width: 100%; max-width: 200px; padding: 20px; font-size: 1.3rem; cursor: pointer; border: 2px solid var(--accent); background: white; color: var(--accent); border-radius: 12px; font-weight: bold; margin: 10px; transition: 0.2s; }
        .option-btn:hover { background: var(--accent); color: white; }

        /* --- RESULT SECTION --- */
        #result-container { display: none; width: 100%; max-width: 850px; background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; }
        .res-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }
        .res-content { padding: 30px; }
        .profile-info { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 20px; border-left: 5px solid #667eea; }
        .spectrum { display: flex; align-items: center; gap: 15px; margin: 20px 0; background: #fff; padding: 20px; border: 1px solid #eee; border-radius: 15px; text-align: center; }
        .info-section { background: white; padding: 20px; border-radius: 15px; margin: 15px 0; border: 1px solid #e9ecef; }
        
        /* --- MODAL --- */
        .overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display:none; justify-content:center; align-items:center; z-index:1000; }
        .modal { background:white; padding:30px; border-radius:15px; width:90%; max-width:400px; }
        
        .btn-main { padding: 15px 30px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; transition: 0.3s; background: #667eea; color: white; }
    </style>
</head>
<body>

<div id="welcome-screen">
    <div class="hero-header">
        <h1>Selamat Datang di Tes Ekstrovert atau Introvert</h1>
    </div>
    <div class="info-text">
        <p>Halo semuanya! Pernahkah kamu mendengar seseorang berkata, "Aku introvert nih, makanya enggak suka keramaian." Atau, "Aku ekstrovert banget, enggak bisa diam di rumah." Tapi apa sebenarnya perbedaan antara ekstrovert dan introvert? Dan yang lebih penting, kamu termasuk yang mana?</p>
        <p>Ternyata perbedaan utama bukan tentang pemalu atau tidak pemalu, tapi tentang dari mana kita mendapatkan energi. <b>Ekstrovert</b> mendapatkan energi dari berinteraksi dengan orang lain dan lingkungan luar. Sementara <b>introvert</b> mendapatkan energi dari waktu sendiri untuk refleksi dan pemikiran dalam.</p>
        <p>Memahami tipe kepribadianmu sangat penting untuk mengenal diri sendiri, memilih karir yang tepat, dan membangun hubungan yang lebih baik. Siapa tahu kamu ternyata seorang <b>Ambivert</b> yang berada di tengah-tengah!</p>
        <p style="text-align: center; font-weight: bold; color: #764ba2; border: 2px dashed #764ba2; padding: 15px; border-radius: 10px;">
            Sebelum kita mulai, siapkan dulu kertas dan pulpen untuk mencatat jawaban kamu ya!<br>Yuk, kita mulai tesnya sekarang!
        </p>
    </div>

    <div class="token-box">
        <input type="text" id="token-input" class="token-input" placeholder="Masukkan Kode Token...">
        <br>
        <button class="btn-main" onclick="validateToken()">MULAI SEKARANG</button>
        <a href="https://wa.me/6285159601400" target="_blank" class="wa-link">
            Apabila kamu belum memiliki token,<br>silahkan hubungi Lidan Psikologi (Klik Di Sini)
        </a>
    </div>
</div>

<div id="quiz-container">
    <div class="video-box">
        <iframe src="https://www.youtube.com/embed/DSN3amtc528" allowfullscreen></iframe>
    </div>
    <div class="quiz-card">
        <span id="q-number" style="font-size: 1.4rem; font-weight: bold; color: var(--accent);">Soal Nomor 1</span>
        <p style="margin: 15px 0; color: #555;">Pilih pernyataan yang paling menggambarkan diri Anda sesuai instruksi video</p>
        <div>
            <button class="option-btn" onclick="handleAnswer('A')">A</button>
            <button class="option-btn" onclick="handleAnswer('B')">B</button>
        </div>
    </div>
</div>

<div id="data-modal" class="overlay">
    <div class="modal">
        <h3 style="margin-top:0; text-align:center;">Tes Selesai!</h3>
        <p style="text-align:center; font-size: 0.9rem;">Isi data diri untuk melihat laporan lengkap.</p>
        <label>Nama Lengkap</label>
        <input type="text" id="user-name" style="width:100%; padding:10px; margin:10px 0; border:1px solid #ddd; border-radius:5px;">
        <label>Usia</label>
        <input type="number" id="user-age" style="width:100%; padding:10px; margin:10px 0; border:1px solid #ddd; border-radius:5px;">
        <button class="btn-main" style="width:100%; margin-top:10px;" onclick="processResult()">LIHAT HASIL</button>
    </div>
</div>

<div id="result-container">
    <div id="capture-area">
        <div class="res-header">
            <h1>üé≠ Laporan Kepribadian</h1>
            <p id="res-tagline"></p>
        </div>
        <div class="res-content">
            <div class="profile-info">
                <div><b>Nama:</b> <span id="res-name"></span></div>
                <div><b>Usia:</b> <span id="res-age"></span></div>
                <div><b>Tanggal:</b> <span id="res-date"></span></div>
            </div>

            <div style="text-align:center; padding: 20px; border-radius: 15px; background: #f0f2f5;">
                <h2 id="res-type-name" style="font-size: 2.5rem; margin-bottom: 10px;"></h2>
                <p id="res-description" style="color: #555; line-height: 1.6;"></p>
            </div>

            <div class="spectrum">
                <div style="flex:1;">üéâ<br><b>Extrovert</b><br><span id="pct-ext"></span></div>
                <div style="flex:2; background:#eee; height:20px; border-radius:10px; position:relative; overflow:hidden;">
                    <div id="bar-indicator" style="height:100%; background: #667eea; width: 0%;"></div>
                </div>
                <div style="flex:1;">üìö<br><b>Introvert</b><br><span id="pct-int"></span></div>
            </div>

            <div style="height: 250px; margin: 20px 0;">
                <canvas id="resultChart"></canvas>
            </div>

            <div class="info-section">
                <h3>üí™ Kekuatan & Karakteristik</h3>
                <ul id="res-traits" style="padding-left: 20px; line-height: 1.8;"></ul>
            </div>
        </div>
    </div>
    <div style="padding: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
        <button class="btn-main" onclick="downloadImage()">üì• Download JPG</button>
        <button class="btn-main" style="background:#2c3e50" onclick="window.print()">üñ®Ô∏è Cetak PDF</button>
    </div>
</div>

<script>
    const TOKEN_VALID = "123abc";
    let currentQ = 1;
    const totalQ = 17;
    let scores = { A: 0, B: 0 };

    const PERSONALITY_DATA = {
        EXTROVERT: {
            name: 'EKSTROVERT', color: '#e74c3c', tagline: 'Energi dari Dunia Luar',
            desc: 'Anda mendapatkan energi dari interaksi sosial. Anda cenderung ekspresif dan menikmati keramaian.',
            traits: ['Senang bersosialisasi', 'Berbicara untuk berpikir', 'Memiliki jaringan pertemanan luas', 'Suka bekerja dalam tim']
        },
        INTROVERT: {
            name: 'INTROVERT', color: '#34495e', tagline: 'Energi dari Dunia Dalam',
            desc: 'Anda mendapatkan energi dari waktu sendiri. Anda cenderung reflektif dan nyaman dengan interaksi mendalam.',
            traits: ['Berpikir sebelum berbicara', 'Menyukai ketenangan', 'Lingkaran pertemanan kecil tapi dekat', 'Mandiri']
        },
        AMBIVERT: {
            name: 'AMBIVERT', color: '#9b59b6', tagline: 'Seimbang di Antara Dua Dunia',
            desc: 'Anda fleksibel dan dapat menyesuaikan diri baik dalam situasi sosial maupun saat sendirian.',
            traits: ['Adaptif terhadap situasi', 'Bisa menikmati pesta maupun me-time', 'Keseimbangan dalam ekspresi']
        }
    };

    function validateToken() {
        if (document.getElementById('token-input').value === TOKEN_VALID) {
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'flex';
        } else {
            alert("Token tidak valid!");
        }
    }

    function handleAnswer(choice) {
        scores[choice]++;
        if (currentQ < totalQ) {
            currentQ++;
            document.getElementById('q-number').innerText = "Soal Nomor " + currentQ;
        } else {
            document.getElementById('data-modal').style.display = 'flex';
        }
    }

    function processResult() {
        const name = document.getElementById('user-name').value || "Peserta";
        document.getElementById('data-modal').style.display = 'none';
        document.getElementById('quiz-container').style.display = 'none';
        document.getElementById('result-container').style.display = 'block';

        const sExt = scores.A;
        const sInt = scores.B;
        const diff = Math.abs(sExt - sInt);
        
        let p;
        if (diff <= 3) p = PERSONALITY_DATA.AMBIVERT;
        else if (sExt > sInt) p = PERSONALITY_DATA.EXTROVERT;
        else p = PERSONALITY_DATA.INTROVERT;

        // Update UI
        document.getElementById('res-name').innerText = name;
        document.getElementById('res-age').innerText = document.getElementById('user-age').value + " Tahun";
        document.getElementById('res-date').innerText = new Date().toLocaleDateString('id-ID');
        document.getElementById('res-type-name').innerText = p.name;
        document.getElementById('res-type-name').style.color = p.color;
        document.getElementById('res-tagline').innerText = p.tagline;
        document.getElementById('res-description').innerText = p.desc;
        
        document.getElementById('pct-ext').innerText = Math.round((sExt/totalQ)*100) + "%";
        document.getElementById('pct-int').innerText = Math.round((sInt/totalQ)*100) + "%";
        document.getElementById('bar-indicator').style.width = (sExt/totalQ)*100 + "%";

        const traitsList = document.getElementById('res-traits');
        traitsList.innerHTML = p.traits.map(t => `<li>${t}</li>`).join('');

        // Chart
        new Chart(document.getElementById('resultChart'), {
            type: 'bar',
            data: {
                labels: ['Ekstrovert', 'Introvert'],
                datasets: [{
                    data: [sExt, sInt],
                    backgroundColor: [PERSONALITY_DATA.EXTROVERT.color, PERSONALITY_DATA.INTROVERT.color]
                }]
            },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
        });
    }

    async function downloadImage() {
        const area = document.getElementById('capture-area');
        const canvas = await html2canvas(area, { scale: 2 });
        const link = document.createElement('a');
        link.download = 'Hasil-Tes-Kepribadian.jpg';
        link.href = canvas.toDataURL('image/jpeg');
        link.click();
    }
</script>

</body>
</html>